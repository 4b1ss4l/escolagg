<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificando modo anônimo...</title>
    <script>
        async function detectIncognito() {
            return new Promise((resolve) => {
                const fs = window.RequestFileSystem || window.webkitRequestFileSystem;
                if (!fs) {
                    resolve(false);
                    return;
                }
                fs(window.TEMPORARY, 100, () => resolve(false), () => resolve(true));
            });
        }

        async function checkIncognitoMode() {
            let isIncognito = false;

            // Teste para navegadores baseados em Chromium (Chrome, Edge, Opera, Brave)
            if (navigator.userAgent.includes("Chrome")) {
                try {
                    const fs = window.RequestFileSystem || window.webkitRequestFileSystem;
                    if (!fs) {
                        isIncognito = false;
                    } else {
                        fs(window.TEMPORARY, 100, () => isIncognito = false, () => isIncognito = true);
                    }
                } catch (e) {
                    isIncognito = true;
                }
            }

            // Teste para Firefox
            try {
                const db = indexedDB.open("test");
                db.onerror = function () {
                    isIncognito = true;
                };
            } catch (e) {
                isIncognito = true;
            }

            // Teste para Safari (iPhone/iPad)
            if (/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)) {
                try {
                    localStorage.setItem("test", "1");
                    localStorage.removeItem("test");
                } catch (e) {
                    isIncognito = true;
                }
            }

            // Se estiver no modo anônimo, redireciona
            if (isIncognito) {
                window.location.href = "https://drive.google.com/drive/folders/1Iv2FtBdHr8lGInLF_9c8Frk3H20a66oc";
            } else {
                document.getElementById("tutorial").style.display = "block";
            }
        }

        window.onload = checkIncognitoMode;
    </script>
    <style>
        #tutorial {
            display: none;
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="tutorial">
        <h2>Como ativar a navegação anônima:</h2>
        <p><strong>Google Chrome:</strong> Pressione <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>N</kbd> (Windows) ou <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>N</kbd> (Mac).</p>
        <p><strong>Mozilla Firefox:</strong> Pressione <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> (Windows) ou <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> (Mac).</p>
        <p><strong>Microsoft Edge:</strong> Pressione <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>N</kbd>.</p>
        <p><strong>Safari:</strong> Vá para <em>Arquivo</em> &gt; <em>Nova Janela Privada</em>.</p>
        <p>Após ativar o modo anônimo, acesse novamente este link.</p>
    </div>
</body>
</html>
